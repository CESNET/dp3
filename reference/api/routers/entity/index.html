
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Dynamic Profile Processing Platform">
      
      
      
        <link rel="canonical" href="https://cesnet.github.io/dp3/reference/api/routers/entity/">
      
      
        <link rel="prev" href="../control/">
      
      
        <link rel="next" href="../root/">
      
      
      <link rel="icon" href="../../../../img/dp3-favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>entity - DP3</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/slate.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dp3.api.routers.entity" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="DP3" class="md-header__button md-logo" aria-label="DP3" data-md-component="logo">
      
  <img src="../../../../img/dp3-logo-min.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DP3
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              entity
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/CESNET/dp3" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    CESNET/dp3
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="DP3" class="md-nav__button md-logo" aria-label="DP3" data-md-component="logo">
      
  <img src="../../../../img/dp3-logo-min.svg" alt="logo">

    </a>
    DP3
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CESNET/dp3" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    CESNET/dp3
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data model
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../history_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    History Management
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../configuration/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/db_entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database entities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/lifetimes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Entity Lifetimes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/event_logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/history_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    History manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/processing_core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Processing core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/snapshots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Snapshots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/garbage_collector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Garbage Collector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../configuration/updater/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Updater
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Code Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    dp3
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_1">
            <span class="md-nav__icon md-icon"></span>
            dp3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    api
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_1" id="__nav_9_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_1_1">
            <span class="md-nav__icon md-icon"></span>
            api
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../internal/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    internal
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_1_1" id="__nav_9_1_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_1_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_1_1">
            <span class="md-nav__icon md-icon"></span>
            internal
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/dp_logger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dp_logger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/entity_response_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    entity_response_models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    helpers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internal/response_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    response_models
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    main
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_1_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    routers
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_1_3" id="__nav_9_1_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_1_1_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_1_1_3">
            <span class="md-nav__icon md-icon"></span>
            routers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    entity
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    entity
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.check_etype" class="md-nav__link">
    <span class="md-ellipsis">
      check_etype
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.parse_eid" class="md-nav__link">
    <span class="md-ellipsis">
      parse_eid
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_master_record_handler" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_master_record_handler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_snapshots_handler" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_snapshots_handler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.list_entity_type_eids" class="md-nav__link">
    <span class="md-ellipsis">
      list_entity_type_eids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_entity_type_eids" class="md-nav__link">
    <span class="md-ellipsis">
      get_entity_type_eids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.count_entity_type_eids" class="md-nav__link">
    <span class="md-ellipsis">
      count_entity_type_eids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_data" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_master_record" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_master_record
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_snapshots" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_snapshots
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_attr_value" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_attr_value
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.set_eid_attr_value" class="md-nav__link">
    <span class="md-ellipsis">
      set_eid_attr_value
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_distinct_attribute_values" class="md-nav__link">
    <span class="md-ellipsis">
      get_distinct_attribute_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.extend_eid_ttls" class="md-nav__link">
    <span class="md-ellipsis">
      extend_eid_ttls
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.delete_eid_record" class="md-nav__link">
    <span class="md-ellipsis">
      delete_eid_record
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../root/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    root
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    telemetry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../bin/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    bin
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_2" id="__nav_9_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_2">
            <span class="md-nav__icon md-icon"></span>
            bin
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bin/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    api
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bin/check/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    check
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bin/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cli
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bin/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bin/schema_update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    schema_update
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bin/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bin/worker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    worker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../common/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    common
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_3" id="__nav_9_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_3">
            <span class="md-nav__icon md-icon"></span>
            common
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/attrspec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    attrspec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/base_module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    base_module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/callback_registrar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    callback_registrar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    context
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/datapoint/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    datapoint
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/datatype/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    datatype
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/entityspec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    entityspec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/mac_address/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mac_address
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/scheduler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    scheduler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    state
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/task/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    task
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../core/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    core
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_4" id="__nav_9_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_4">
            <span class="md-nav__icon md-icon"></span>
            core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../core/collector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    collector
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../core/link_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    link_manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../core/updater/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    updater
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../database/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    database
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_5" id="__nav_9_1_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_5">
            <span class="md-nav__icon md-icon"></span>
            database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database/database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database/encodings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    encodings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database/magic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    magic
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database/schema_cleaner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    schema_cleaner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database/snapshots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    snapshots
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../history_management/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    history_management
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_6" id="__nav_9_1_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_6">
            <span class="md-nav__icon md-icon"></span>
            history_management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../history_management/history_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    history_manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../history_management/telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    telemetry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../scripts/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    scripts
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_7" id="__nav_9_1_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_7">
            <span class="md-nav__icon md-icon"></span>
            scripts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripts/add_hashes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    add_hashes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripts/add_min_t2s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    add_min_t2s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripts/datapoint_log_converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    datapoint_log_converter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripts/dummy_sender/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dummy_sender
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripts/migrate_snapshots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    migrate_snapshots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../scripts/script_runner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    script_runner
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../snapshots/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    snapshots
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_8" id="__nav_9_1_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_8">
            <span class="md-nav__icon md-icon"></span>
            snapshots
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../snapshots/snapshooter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    snapshooter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../snapshots/snapshot_hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    snapshot_hooks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../task_processing/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    task_processing
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_9" id="__nav_9_1_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_9">
            <span class="md-nav__icon md-icon"></span>
            task_processing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../task_processing/task_distributor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    task_distributor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../task_processing/task_executor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    task_executor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../task_processing/task_hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    task_hooks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../task_processing/task_queue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    task_queue
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../worker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    worker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scripts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../grafana_plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grafana plugin
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../extending/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending Documentation
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.check_etype" class="md-nav__link">
    <span class="md-ellipsis">
      check_etype
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.parse_eid" class="md-nav__link">
    <span class="md-ellipsis">
      parse_eid
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_master_record_handler" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_master_record_handler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_snapshots_handler" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_snapshots_handler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.list_entity_type_eids" class="md-nav__link">
    <span class="md-ellipsis">
      list_entity_type_eids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_entity_type_eids" class="md-nav__link">
    <span class="md-ellipsis">
      get_entity_type_eids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.count_entity_type_eids" class="md-nav__link">
    <span class="md-ellipsis">
      count_entity_type_eids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_data" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_master_record" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_master_record
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_snapshots" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_snapshots
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_eid_attr_value" class="md-nav__link">
    <span class="md-ellipsis">
      get_eid_attr_value
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.set_eid_attr_value" class="md-nav__link">
    <span class="md-ellipsis">
      set_eid_attr_value
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.get_distinct_attribute_values" class="md-nav__link">
    <span class="md-ellipsis">
      get_distinct_attribute_values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.extend_eid_ttls" class="md-nav__link">
    <span class="md-ellipsis">
      extend_eid_ttls
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dp3.api.routers.entity.delete_eid_record" class="md-nav__link">
    <span class="md-ellipsis">
      delete_eid_record
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div class="doc doc-object doc-module">



<h1 id="dp3.api.routers.entity" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">dp3.api.routers.entity</span>


<a href="#dp3.api.routers.entity" class="headerlink" title="Permanent link">&para;</a></h1>

    <div class="doc doc-contents first">









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.check_etype" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">check_etype</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.check_etype" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">check_etype</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Middleware to check entity type existence</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">check_etype</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Middleware to check entity type existence&quot;&quot;&quot;</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">if</span> <span class="n">etype</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">MODEL_SPEC</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>        <span class="k">raise</span> <span class="n">RequestValidationError</span><span class="p">([</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;etype&quot;</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;Entity type &#39;</span><span class="si">{</span><span class="n">etype</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist&quot;</span><span class="p">)</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>    <span class="k">return</span> <span class="n">etype</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.parse_eid" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">parse_eid</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.parse_eid" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">parse_eid</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">eid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Middleware to parse EID</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">parse_eid</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">eid</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Middleware to parse EID&quot;&quot;&quot;</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>        <span class="k">return</span> <span class="n">EntityIdAdapter</span><span class="o">.</span><span class="n">validate_python</span><span class="p">({</span><span class="s2">&quot;etype&quot;</span><span class="p">:</span> <span class="n">etype</span><span class="p">,</span> <span class="s2">&quot;eid&quot;</span><span class="p">:</span> <span class="n">eid</span><span class="p">})</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>        <span class="k">raise</span> <span class="n">RequestValidationError</span><span class="p">([</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;eid&quot;</span><span class="p">],</span> <span class="n">e</span><span class="o">.</span><span class="n">errors</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.get_eid_master_record_handler" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_eid_master_record_handler</span>


<a href="#dp3.api.routers.entity.get_eid_master_record_handler" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_eid_master_record_handler</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">EntityId</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handler for getting master record of EID</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_eid_master_record_handler</span><span class="p">(</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="n">e</span><span class="p">:</span> <span class="n">EntityId</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="p">):</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Handler for getting master record of EID&quot;&quot;&quot;</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="c1"># TODO: This is probably not the most efficient way. Maybe gather only</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="c1"># plain data from master record and then call `get_timeseries_history`</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="c1"># for timeseries.</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="n">master_record</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get_master_record</span><span class="p">(</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>        <span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;#hash&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;#min_t2s&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="p">)</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>    <span class="n">entity_attribs</span> <span class="o">=</span> <span class="n">MODEL_SPEC</span><span class="o">.</span><span class="n">attribs</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="c1"># Get filtered timeseries data</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">master_record</span><span class="p">:</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>        <span class="c1"># Check for no longer existing attributes</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span class="k">if</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">entity_attribs</span> <span class="ow">and</span> <span class="n">entity_attribs</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span><span class="o">.</span><span class="n">t</span> <span class="o">==</span> <span class="n">AttrType</span><span class="o">.</span><span class="n">TIMESERIES</span><span class="p">:</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>            <span class="n">master_record</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get_timeseries_history</span><span class="p">(</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>                <span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="n">date_from</span><span class="p">,</span> <span class="n">t2</span><span class="o">=</span><span class="n">date_to</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>            <span class="p">)</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span class="k">return</span> <span class="n">master_record</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.get_eid_snapshots_handler" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_eid_snapshots_handler</span>


<a href="#dp3.api.routers.entity.get_eid_snapshots_handler" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_eid_snapshots_handler</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">EntityId</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handler for getting snapshots of EID</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_eid_snapshots_handler</span><span class="p">(</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="n">e</span><span class="p">:</span> <span class="n">EntityId</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Handler for getting snapshots of EID&quot;&quot;&quot;</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="n">snapshots</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">DB</span><span class="o">.</span><span class="n">snapshots</span><span class="o">.</span><span class="n">get_by_eid</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="n">date_from</span><span class="p">,</span> <span class="n">t2</span><span class="o">=</span><span class="n">date_to</span><span class="p">))</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="k">return</span> <span class="n">snapshots</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.list_entity_type_eids" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">list_entity_type_eids</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.list_entity_type_eids" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">list_entity_type_eids</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fulltext_filters</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">generic_filter</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">skip</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidList</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List latest snapshots of all <code>id</code>s present in database under <code>etype</code>.</p>
<p>Deprecated in favor of <code>/entity/{etype}/get</code> and <code>/entity/{etype}/count</code> endpoints,
which provide more flexibility and better performance.</p>
<p>See <code>/entity/{etype}/get</code> for more information.</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">400</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Query can&#39;t be processed&quot;</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">ErrorResponse</span><span class="p">}},</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="n">deprecated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="p">)</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_entity_type_eids</span><span class="p">(</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="n">fulltext_filters</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="n">generic_filter</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>    <span class="n">skip</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>    <span class="n">limit</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidList</span><span class="p">:</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;List latest snapshots of all `id`s present in database under `etype`.</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">    Deprecated in favor of `/entity/{etype}/get` and `/entity/{etype}/count` endpoints,</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">    which provide more flexibility and better performance.</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">    See `/entity/{etype}/get` for more information.</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span class="n">fulltext_filters</span><span class="p">,</span> <span class="n">generic_filter</span> <span class="o">=</span> <span class="n">_validate_snapshot_filters</span><span class="p">(</span><span class="n">fulltext_filters</span><span class="p">,</span> <span class="n">generic_filter</span><span class="p">)</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span class="n">cursor</span><span class="p">,</span> <span class="n">total_count</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">snapshots</span><span class="o">.</span><span class="n">get_latest</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">fulltext_filters</span><span class="p">,</span> <span class="n">generic_filter</span><span class="p">)</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="n">cursor_page</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="n">skip</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="k">except</span> <span class="n">DatabaseError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="n">time_created</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>    <span class="c1"># Remove _id field</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s2">&quot;last&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">cursor_page</span><span class="p">]</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>        <span class="n">time_created</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;_time_created&quot;</span><span class="p">]</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="k">del</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;_time_created&quot;</span><span class="p">]</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="k">return</span> <span class="n">EntityEidList</span><span class="p">(</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>        <span class="n">time_created</span><span class="o">=</span><span class="n">time_created</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">total_count</span><span class="o">=</span><span class="n">total_count</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">result</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.get_entity_type_eids" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_entity_type_eids</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.get_entity_type_eids" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_entity_type_eids</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fulltext_filters</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">generic_filter</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">skip</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidList</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List latest snapshots of all <code>id</code>s present in database under <code>etype</code>.</p>
<p>Contains only latest snapshot.
The <code>total_count</code> returned is always 0, use <code>/entity/{etype}/count</code> to get total count.</p>
<p>Uses pagination.
Setting <code>limit</code> to 0 is interpreted as no limit (return all results).</p>
<p>Returns only documents matching <code>generic_filter</code> and <code>fulltext_filters</code>
(JSON object in format: attribute - fulltext filter).
Fulltext filters are interpreted as regular expressions.
Only string values may be filtered this way. There's no validation that queried attribute
can be fulltext filtered.
Only plain and observation attributes with string-based data types can be queried.
Array and set data types are supported as well as long as they are not multi value
at the same time.
If you need to filter EIDs, use attribute fulltext_filters["eid"].</p>
<p>Generic filter allows filtering using generic MongoDB query (including <code>$and</code>, <code>$or</code>,
<code>$lt</code>, etc.).
For querying non-JSON-native types, you can use the following magic strings:</p>
<ul>
<li><code>"$$IPv4{&lt;ip address&gt;}"</code> - converts to IPv4Address object</li>
<li><code>"$$IPv6{&lt;ip address&gt;}"</code> - converts to IPv6Address object</li>
<li><code>"$$int{&lt;value&gt;}"</code> - may be necessary for filtering when <code>eid</code> data type is int</li>
<li><code>"$$Date{&lt;YYYY-mm-ddTHH:MM:ssZ&gt;}"</code> - converts specified UTC date to UTC datetime object</li>
<li><code>"$$DateTs{&lt;POSIX timestamp&gt;}"</code> - converts POSIX timestamp (int/float) to UTC datetime object</li>
<li><code>"$$MAC{&lt;mac address&gt;}"</code> - converts to MACAddress object</li>
</ul>
<p>To query an IP prefix, use the following magic strings:</p>
<ul>
<li><code>"$$IPv4Prefix{&lt;ip address&gt;/&lt;prefix length&gt;}"</code> - matches prefix</li>
<li><code>"$$IPv6Prefix{&lt;ip address&gt;/&lt;prefix length&gt;}"</code> - matches prefix</li>
</ul>
<p>To query a binary <code>_id</code>s of non-string snapshot buckets,
use the following magic string:</p>
<ul>
<li>
<p><code>"$$Binary_ID{&lt;EID object | Valid magic string&gt;}"</code></p>
<ul>
<li>converts to filter the exact EID object snapshots, only EID valid types are supported</li>
</ul>
</li>
</ul>
<p>There are no attribute name checks (may be added in the future).</p>
<p>Generic filter examples:</p>
<ul>
<li><code>{"attr1": {"$gt": 10}, "attr2": {"$lt": 20}}</code></li>
<li><code>{"ip_attr": "$$IPv4{127.0.0.1}"}</code> - converts to IPv4Address object, exact match</li>
<li>
<p><code>{"ip_attr": "$$IPv4Prefix{127.0.0.0/24}"}</code></p>
<ul>
<li>converts to <code>{"ip_attr": {"$gte": "$$IPv4{127.0.0.0}",
  "$lte": "$$IPv4{127.0.0.255}"}}</code></li>
</ul>
</li>
<li>
<p><code>{"ip_attr": "$$IPv6{::1}"}</code> - converts to IPv6Address object, exact match</p>
</li>
<li>
<p><code>{"ip_attr": "$$IPv6Prefix{::1/64}"}</code></p>
<ul>
<li>converts to <code>{"ip_attr": {"$gte": "$$IPv6{::1}",
  "$lte": "$$IPv6{::1:ffff:ffff:ffff:ffff}"}}</code></li>
</ul>
</li>
<li>
<p><code>{"_id": "$$Binary_ID{$$IPv4{127.0.0.1}}"}</code></p>
<ul>
<li>converts to <code>{"_id": {"$gte": Binary(&lt;IP bytes + min timestamp&gt;),
  "$lt": Binary(&lt;IP bytes + max timestamp&gt;)}}</code></li>
</ul>
</li>
<li>
<p><code>{"id": "$$Binary_ID{$$IPv4Prefix{127.0.0.0/24}}"}</code></p>
<ul>
<li>converts to <code>{"_id": {"$gte": Binary(&lt;IP 127.0.0.0 bytes + min timestamp&gt;),
  "$lte": Binary(&lt;IP 127.0.0.255 bytes + max timestamp&gt;)}}</code></li>
</ul>
</li>
<li>
<p><code>{"_time_created": {"$gte": "$$Date{2024-11-07T00:00:00Z}"}}</code></p>
<ul>
<li>converts to <code>{"_time_created": datetime(2024, 11, 7, 0, 0, 0, tzinfo=timezone.utc)}</code></li>
</ul>
</li>
<li>
<p><code>{"_time_created": {"$gte": "$$DateTs{1609459200}"}}</code></p>
<ul>
<li>converts to <code>{"_time_created": datetime(2021, 1, 1, 0, 0, 0, tzinfo=timezone.utc)}</code></li>
</ul>
</li>
<li>
<p><code>{"attr": "$$MAC{00:11:22:33:44:55}"}</code> - converts to MACAddress object, exact match</p>
</li>
<li><code>{"_id": "$$Binary_ID{$$MAC{Ab-cD-Ef-12-34-56}}"}</code><ul>
<li>converts to <code>{"_id": {"$gte": Binary(&lt;MAC bytes + min timestamp&gt;),
    "$lt": Binary(&lt;MAC bytes + max timestamp&gt;)}}</code></li>
</ul>
</li>
</ul>
<p>There are no attribute name checks (may be added in the future).</p>
<p>Generic and fulltext filters are merged - fulltext overrides conflicting keys.</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/get&quot;</span><span class="p">,</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">400</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Query can&#39;t be processed&quot;</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">ErrorResponse</span><span class="p">}},</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="p">)</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type_eids</span><span class="p">(</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>    <span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>    <span class="n">fulltext_filters</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>    <span class="n">generic_filter</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span class="n">skip</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>    <span class="n">limit</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidList</span><span class="p">:</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;List latest snapshots of all `id`s present in database under `etype`.</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">    Contains only latest snapshot.</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">    The `total_count` returned is always 0, use `/entity/{etype}/count` to get total count.</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">    Uses pagination.</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">    Setting `limit` to 0 is interpreted as no limit (return all results).</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">    Returns only documents matching `generic_filter` and `fulltext_filters`</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">    (JSON object in format: attribute - fulltext filter).</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">    Fulltext filters are interpreted as regular expressions.</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">    Only string values may be filtered this way. There&#39;s no validation that queried attribute</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">    can be fulltext filtered.</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    Only plain and observation attributes with string-based data types can be queried.</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">    Array and set data types are supported as well as long as they are not multi value</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">    at the same time.</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">    If you need to filter EIDs, use attribute fulltext_filters[&quot;eid&quot;].</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">    Generic filter allows filtering using generic MongoDB query (including `$and`, `$or`,</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">    `$lt`, etc.).</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="sd">    For querying non-JSON-native types, you can use the following magic strings:</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="sd">    - `&quot;$$IPv4{&lt;ip address&gt;}&quot;` - converts to IPv4Address object</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="sd">    - `&quot;$$IPv6{&lt;ip address&gt;}&quot;` - converts to IPv6Address object</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="sd">    - `&quot;$$int{&lt;value&gt;}&quot;` - may be necessary for filtering when `eid` data type is int</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="sd">    - `&quot;$$Date{&lt;YYYY-mm-ddTHH:MM:ssZ&gt;}&quot;` - converts specified UTC date to UTC datetime object</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a><span class="sd">    - `&quot;$$DateTs{&lt;POSIX timestamp&gt;}&quot;` - converts POSIX timestamp (int/float) to UTC datetime object</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="sd">    - `&quot;$$MAC{&lt;mac address&gt;}&quot;` - converts to MACAddress object</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="sd">    To query an IP prefix, use the following magic strings:</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="sd">    - `&quot;$$IPv4Prefix{&lt;ip address&gt;/&lt;prefix length&gt;}&quot;` - matches prefix</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="sd">    - `&quot;$$IPv6Prefix{&lt;ip address&gt;/&lt;prefix length&gt;}&quot;` - matches prefix</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">    To query a binary `_id`s of non-string snapshot buckets,</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">    use the following magic string:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">    - `&quot;$$Binary_ID{&lt;EID object | Valid magic string&gt;}&quot;`</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">        - converts to filter the exact EID object snapshots, only EID valid types are supported</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">    There are no attribute name checks (may be added in the future).</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">    Generic filter examples:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">    - `{&quot;attr1&quot;: {&quot;$gt&quot;: 10}, &quot;attr2&quot;: {&quot;$lt&quot;: 20}}`</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">    - `{&quot;ip_attr&quot;: &quot;$$IPv4{127.0.0.1}&quot;}` - converts to IPv4Address object, exact match</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">    - `{&quot;ip_attr&quot;: &quot;$$IPv4Prefix{127.0.0.0/24}&quot;}`</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="sd">        - converts to `{&quot;ip_attr&quot;: {&quot;$gte&quot;: &quot;$$IPv4{127.0.0.0}&quot;,</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">          &quot;$lte&quot;: &quot;$$IPv4{127.0.0.255}&quot;}}`</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">    - `{&quot;ip_attr&quot;: &quot;$$IPv6{::1}&quot;}` - converts to IPv6Address object, exact match</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">    - `{&quot;ip_attr&quot;: &quot;$$IPv6Prefix{::1/64}&quot;}`</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">        - converts to `{&quot;ip_attr&quot;: {&quot;$gte&quot;: &quot;$$IPv6{::1}&quot;,</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">          &quot;$lte&quot;: &quot;$$IPv6{::1:ffff:ffff:ffff:ffff}&quot;}}`</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">    - `{&quot;_id&quot;: &quot;$$Binary_ID{$$IPv4{127.0.0.1}}&quot;}`</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">        - converts to `{&quot;_id&quot;: {&quot;$gte&quot;: Binary(&lt;IP bytes + min timestamp&gt;),</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">          &quot;$lt&quot;: Binary(&lt;IP bytes + max timestamp&gt;)}}`</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">    - `{&quot;id&quot;: &quot;$$Binary_ID{$$IPv4Prefix{127.0.0.0/24}}&quot;}`</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">        - converts to `{&quot;_id&quot;: {&quot;$gte&quot;: Binary(&lt;IP 127.0.0.0 bytes + min timestamp&gt;),</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">          &quot;$lte&quot;: Binary(&lt;IP 127.0.0.255 bytes + max timestamp&gt;)}}`</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">    - `{&quot;_time_created&quot;: {&quot;$gte&quot;: &quot;$$Date{2024-11-07T00:00:00Z}&quot;}}`</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="sd">        - converts to `{&quot;_time_created&quot;: datetime(2024, 11, 7, 0, 0, 0, tzinfo=timezone.utc)}`</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="sd">    - `{&quot;_time_created&quot;: {&quot;$gte&quot;: &quot;$$DateTs{1609459200}&quot;}}`</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="sd">        - converts to `{&quot;_time_created&quot;: datetime(2021, 1, 1, 0, 0, 0, tzinfo=timezone.utc)}`</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="sd">    - `{&quot;attr&quot;: &quot;$$MAC{00:11:22:33:44:55}&quot;}` - converts to MACAddress object, exact match</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">    - `{&quot;_id&quot;: &quot;$$Binary_ID{$$MAC{Ab-cD-Ef-12-34-56}}&quot;}`</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">        - converts to `{&quot;_id&quot;: {&quot;$gte&quot;: Binary(&lt;MAC bytes + min timestamp&gt;),</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">            &quot;$lt&quot;: Binary(&lt;MAC bytes + max timestamp&gt;)}}`</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">    There are no attribute name checks (may be added in the future).</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">    Generic and fulltext filters are merged - fulltext overrides conflicting keys.</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>    <span class="n">fulltext_filters</span><span class="p">,</span> <span class="n">generic_filter</span> <span class="o">=</span> <span class="n">_validate_snapshot_filters</span><span class="p">(</span><span class="n">fulltext_filters</span><span class="p">,</span> <span class="n">generic_filter</span><span class="p">)</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">snapshots</span><span class="o">.</span><span class="n">find_latest</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">fulltext_filters</span><span class="p">,</span> <span class="n">generic_filter</span><span class="p">)</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>        <span class="n">cursor_page</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="n">skip</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>    <span class="k">except</span> <span class="n">DatabaseError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>    <span class="n">time_created</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>    <span class="c1"># Remove _id field</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s2">&quot;last&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">cursor_page</span><span class="p">]</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span class="n">time_created</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;_time_created&quot;</span><span class="p">]</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>        <span class="k">del</span> <span class="n">r</span><span class="p">[</span><span class="s2">&quot;_time_created&quot;</span><span class="p">]</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>    <span class="k">return</span> <span class="n">EntityEidList</span><span class="p">(</span><span class="n">time_created</span><span class="o">=</span><span class="n">time_created</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">total_count</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.count_entity_type_eids" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">count_entity_type_eids</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.count_entity_type_eids" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">count_entity_type_eids</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fulltext_filters</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">generic_filter</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidCount</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Count latest snapshots of all <code>id</code>s present in database under <code>etype</code>.</p>
<p>Returns only count of documents matching <code>generic_filter</code> and <code>fulltext_filters</code>,
see <code>/entity/{etype}/get</code> documentation for details.</p>
<p>Note that responses from this endpoint may take much longer than <code>/entity/{etype}/get</code>
for large datasets.</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/count&quot;</span><span class="p">,</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">400</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Query can&#39;t be processed&quot;</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">ErrorResponse</span><span class="p">}},</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="p">)</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">count_entity_type_eids</span><span class="p">(</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>    <span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>    <span class="n">fulltext_filters</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>    <span class="n">generic_filter</span><span class="p">:</span> <span class="n">Json</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidCount</span><span class="p">:</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Count latest snapshots of all `id`s present in database under `etype`.</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="sd">    Returns only count of documents matching `generic_filter` and `fulltext_filters`,</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">    see `/entity/{etype}/get` documentation for details.</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="sd">    Note that responses from this endpoint may take much longer than `/entity/{etype}/get`</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="sd">    for large datasets.</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="n">fulltext_filters</span><span class="p">,</span> <span class="n">generic_filter</span> <span class="o">=</span> <span class="n">_validate_snapshot_filters</span><span class="p">(</span><span class="n">fulltext_filters</span><span class="p">,</span> <span class="n">generic_filter</span><span class="p">)</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>        <span class="n">count</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">snapshots</span><span class="o">.</span><span class="n">count_latest</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">fulltext_filters</span><span class="p">,</span> <span class="n">generic_filter</span><span class="p">)</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span class="k">except</span> <span class="n">DatabaseError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>    <span class="k">return</span> <span class="n">EntityEidCount</span><span class="p">(</span><span class="n">total_count</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.get_eid_data" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_eid_data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.get_eid_data" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_eid_data</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidData</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get data of <code>etype</code>'s <code>eid</code>.</p>
<p>Contains all snapshots and master record.
Snapshots are ordered by ascending creation time.</p>
<p>Combines function of <code>/{etype}/{eid}/master</code> and <code>/{etype}/{eid}/snapshots</code>.</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/</span><span class="si">{eid}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_eid_data</span><span class="p">(</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidData</span><span class="p">:</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get data of `etype`&#39;s `eid`.</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="sd">    Contains all snapshots and master record.</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">    Snapshots are ordered by ascending creation time.</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">    Combines function of `/{etype}/{eid}/master` and `/{etype}/{eid}/snapshots`.</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>    <span class="n">master_record</span> <span class="o">=</span> <span class="n">get_eid_master_record_handler</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">date_from</span><span class="p">,</span> <span class="n">date_to</span><span class="p">)</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>    <span class="n">snapshots</span> <span class="o">=</span> <span class="n">get_eid_snapshots_handler</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">date_from</span><span class="p">,</span> <span class="n">date_to</span><span class="p">)</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>    <span class="c1"># Whether this eid contains any data</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="n">empty</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">master_record</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">snapshots</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>    <span class="k">return</span> <span class="n">EntityEidData</span><span class="p">(</span><span class="n">empty</span><span class="o">=</span><span class="n">empty</span><span class="p">,</span> <span class="n">master_record</span><span class="o">=</span><span class="n">master_record</span><span class="p">,</span> <span class="n">snapshots</span><span class="o">=</span><span class="n">snapshots</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.get_eid_master_record" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_eid_master_record</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.get_eid_master_record" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_eid_master_record</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidMasterRecord</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get master record of <code>etype</code>'s <code>eid</code>.</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/</span><span class="si">{eid}</span><span class="s2">/master&quot;</span><span class="p">)</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_eid_master_record</span><span class="p">(</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>    <span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidMasterRecord</span><span class="p">:</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get master record of `etype`&#39;s `eid`.&quot;&quot;&quot;</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>    <span class="k">return</span> <span class="n">get_eid_master_record_handler</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">date_from</span><span class="p">,</span> <span class="n">date_to</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.get_eid_snapshots" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_eid_snapshots</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.get_eid_snapshots" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_eid_snapshots</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidSnapshots</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get snapshots of <code>etype</code>'s <code>eid</code>.</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/</span><span class="si">{eid}</span><span class="s2">/snapshots&quot;</span><span class="p">)</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_eid_snapshots</span><span class="p">(</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>    <span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidSnapshots</span><span class="p">:</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get snapshots of `etype`&#39;s `eid`.&quot;&quot;&quot;</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>    <span class="k">return</span> <span class="n">get_eid_snapshots_handler</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">date_from</span><span class="p">,</span> <span class="n">date_to</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.get_eid_attr_value" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_eid_attr_value</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.get_eid_attr_value" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_eid_attr_value</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidAttrValueOrHistory</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get attribute value</p>
<p>Value is either of:
- current value: in case of plain attribute
- current value and history: in case of observation attribute
- history: in case of timeseries attribute</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/</span><span class="si">{eid}</span><span class="s2">/get/</span><span class="si">{attr}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_eid_attr_value</span><span class="p">(</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>    <span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>    <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>    <span class="n">date_from</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>    <span class="n">date_to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityEidAttrValueOrHistory</span><span class="p">:</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get attribute value</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="sd">    Value is either of:</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">    - current value: in case of plain attribute</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="sd">    - current value and history: in case of observation attribute</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">    - history: in case of timeseries attribute</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>    <span class="c1"># Check if attribute exists</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="k">if</span> <span class="n">attr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">MODEL_SPEC</span><span class="o">.</span><span class="n">attribs</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">):</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>        <span class="k">raise</span> <span class="n">RequestValidationError</span><span class="p">([</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;attr&quot;</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;Attribute &#39;</span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist&quot;</span><span class="p">)</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>    <span class="n">value_or_history</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get_value_or_history</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="n">date_from</span><span class="p">,</span> <span class="n">t2</span><span class="o">=</span><span class="n">date_to</span><span class="p">)</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>    <span class="k">return</span> <span class="n">EntityEidAttrValueOrHistory</span><span class="p">(</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>        <span class="n">attr_type</span><span class="o">=</span><span class="n">MODEL_SPEC</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="o">**</span><span class="n">value_or_history</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.set_eid_attr_value" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">set_eid_attr_value</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.set_eid_attr_value" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">set_eid_attr_value</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">eid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">EntityEidAttrValue</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SuccessResponse</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set current value of attribute</p>
<p>Internally just creates datapoint for specified attribute and value.</p>
<p>This endpoint is meant for <code>editable</code> plain attributes -- for direct user edit on DP3 web UI.</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/</span><span class="si">{eid}</span><span class="s2">/set/</span><span class="si">{attr}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_eid_attr_value</span><span class="p">(</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>    <span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">eid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">EntityEidAttrValue</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Request</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SuccessResponse</span><span class="p">:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set current value of attribute</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="sd">    Internally just creates datapoint for specified attribute and value.</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="sd">    This endpoint is meant for `editable` plain attributes -- for direct user edit on DP3 web UI.</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>    <span class="c1"># Check if attribute exists</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>    <span class="k">if</span> <span class="n">attr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">MODEL_SPEC</span><span class="o">.</span><span class="n">attribs</span><span class="p">(</span><span class="n">etype</span><span class="p">):</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>        <span class="k">raise</span> <span class="n">RequestValidationError</span><span class="p">([</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;attr&quot;</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;Attribute &#39;</span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist&quot;</span><span class="p">)</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>    <span class="c1"># Construct datapoint</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>        <span class="n">dp</span> <span class="o">=</span> <span class="n">DataPoint</span><span class="p">(</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>            <span class="nb">type</span><span class="o">=</span><span class="n">etype</span><span class="p">,</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>            <span class="nb">id</span><span class="o">=</span><span class="n">eid</span><span class="p">,</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>            <span class="n">attr</span><span class="o">=</span><span class="n">attr</span><span class="p">,</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>            <span class="n">v</span><span class="o">=</span><span class="n">body</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>            <span class="n">t1</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>            <span class="n">src</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2"> via API&quot;</span><span class="p">,</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>        <span class="p">)</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>        <span class="n">dp3_dp</span> <span class="o">=</span> <span class="n">api_to_dp3_datapoint</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>        <span class="k">raise</span> <span class="n">RequestValidationError</span><span class="p">([</span><span class="s2">&quot;body&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">],</span> <span class="n">e</span><span class="o">.</span><span class="n">errors</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>    <span class="c1"># This shouldn&#39;t fail</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>    <span class="k">with</span> <span class="n">task_context</span><span class="p">(</span><span class="n">MODEL_SPEC</span><span class="p">):</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>        <span class="n">task</span> <span class="o">=</span> <span class="n">DataPointTask</span><span class="p">(</span><span class="n">etype</span><span class="o">=</span><span class="n">etype</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="n">eid</span><span class="p">,</span> <span class="n">data_points</span><span class="o">=</span><span class="p">[</span><span class="n">dp3_dp</span><span class="p">])</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>    <span class="c1"># Push tasks to task queue</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>    <span class="n">TASK_WRITER</span><span class="o">.</span><span class="n">put_task</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>    <span class="c1"># Datapoints from this endpoint are intentionally not logged using `DPLogger`.</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>    <span class="c1"># If for some reason, in the future, they need to be, just copy code from data ingestion</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>    <span class="c1"># endpoint.</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>    <span class="k">return</span> <span class="n">SuccessResponse</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.get_distinct_attribute_values" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_distinct_attribute_values</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.get_distinct_attribute_values" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_distinct_attribute_values</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="n">JsonVal</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Gets distinct attribute values and their counts based on latest snapshots</p>
<p>Useful for displaying <code>&lt;select&gt;</code> enumeration fields.</p>
<p>Works for all plain and observation data types except <code>dict</code> and <code>json</code>.</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>    <span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/_/distinct/</span><span class="si">{attr}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">400</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Query can&#39;t be processed&quot;</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">ErrorResponse</span><span class="p">}},</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="p">)</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_distinct_attribute_values</span><span class="p">(</span><span class="n">etype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="n">JsonVal</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets distinct attribute values and their counts based on latest snapshots</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">    Useful for displaying `&lt;select&gt;` enumeration fields.</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="sd">    Works for all plain and observation data types except `dict` and `json`.</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>        <span class="k">return</span> <span class="n">DB</span><span class="o">.</span><span class="n">snapshots</span><span class="o">.</span><span class="n">get_distinct_val_count</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>    <span class="k">except</span> <span class="n">DatabaseError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.extend_eid_ttls" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extend_eid_ttls</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.extend_eid_ttls" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">extend_eid_ttls</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">datetime</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">SuccessResponse</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extend TTLs of the specified entity</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-395" name="__codelineno-0-395"></a><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/</span><span class="si">{eid}</span><span class="s2">/ttl&quot;</span><span class="p">)</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">extend_eid_ttls</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">datetime</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">SuccessResponse</span><span class="p">:</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extend TTLs of the specified entity&quot;&quot;&quot;</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>    <span class="c1"># Construct task</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>    <span class="k">with</span> <span class="n">task_context</span><span class="p">(</span><span class="n">MODEL_SPEC</span><span class="p">):</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>        <span class="n">task</span> <span class="o">=</span> <span class="n">DataPointTask</span><span class="p">(</span><span class="n">etype</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">ttl_tokens</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>    <span class="c1"># Push tasks to task queue</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>    <span class="n">TASK_WRITER</span><span class="o">.</span><span class="n">put_task</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>    <span class="k">return</span> <span class="n">SuccessResponse</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="dp3.api.routers.entity.delete_eid_record" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">delete_eid_record</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#dp3.api.routers.entity.delete_eid_record" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">delete_eid_record</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SuccessResponse</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Delete the master record and snapshots of the specified entity.</p>
<p>Notice that this does not delete any raw datapoints,
or block the re-creation of the entity if new datapoints are received.</p>


            <details class="quote">
              <summary>Source code in <code>dp3/api/routers/entity.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="nd">@router</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{etype}</span><span class="s2">/</span><span class="si">{eid}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_eid_record</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ParsedEid</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SuccessResponse</span><span class="p">:</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete the master record and snapshots of the specified entity.</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">    Notice that this does not delete any raw datapoints,</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">    or block the re-creation of the entity if new datapoints are received.</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>    <span class="c1"># Create a &quot;delete&quot; task and push it to task queue</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>    <span class="k">with</span> <span class="n">task_context</span><span class="p">(</span><span class="n">MODEL_SPEC</span><span class="p">):</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>        <span class="n">task</span> <span class="o">=</span> <span class="n">DataPointTask</span><span class="p">(</span><span class="n">etype</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">eid</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>    <span class="n">TASK_WRITER</span><span class="o">.</span><span class="n">put_task</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>    <span class="k">return</span> <span class="n">SuccessResponse</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.code.copy", "content.code.annotate"], "search": "../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>